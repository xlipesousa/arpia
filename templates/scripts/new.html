{% extends "base.html" %}
{% load static %}
{% block title %}Novo Script — ARPIA{% endblock %}

{% block content %}
<div class="main" style="padding:1.25rem;max-width:900px;margin:0 auto;">
  <h2 style="margin:0 0 1rem 0;color:var(--text)">Editor de Scripts</h2>

  <form method="post" class="card" style="padding:1rem;display:flex;flex-direction:column;gap:.75rem;">
    {% csrf_token %}
    <div style="display:flex;gap:.5rem;align-items:center;">
      <label style="font-weight:700;color:var(--muted);min-width:90px">Arquivo</label>
      <input name="filename" placeholder="nome_do_script.sh" value="{{ filename }}" style="flex:1;padding:.45rem .6rem;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);">
      <a href="{% url 'scripts_list' %}" class="btn btn-ghost" style="margin-left:.5rem">Cancelar</a>
    </div>

    <label style="font-weight:700;color:var(--muted)">Conteúdo</label>
    <textarea name="content" id="script-content" rows="18" style="width:100%;padding:.6rem;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:#021023;color:#dbeafe;font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; resize:vertical;">{{ content }}</textarea>

    <div style="display:flex;gap:.5rem;justify-content:flex-end;margin-top:.25rem;">
      <button type="submit" class="btn btn-primary">Salvar</button>
    </div>
  </form>

  <div style="margin-top:1rem;">
    <h4 style="margin:.25rem 0;color:var(--muted)">Meus scripts ({{ username }})</h4>
    <ul>
      {% for f in user_files %}
        <li><a href="{% url 'scripts_edit' f %}">{{ f }}</a></li>
      {% empty %}
        <li style="color:var(--muted)">Nenhum script encontrado.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}