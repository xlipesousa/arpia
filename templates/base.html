<!doctype html>
<html lang="pt-br">
<head>
  {% load static %}
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}ARPIA{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/dark.css' %}">
  <style>
    /* botão logout — estilo semelhante ao "Gerar Selecionados", com cor de ação de saída */
    .btn-logout{
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      padding:.4rem .7rem;
      border-radius:8px;
      background:rgba(255,139,139,0.06);
      color:#ff8b8b;
      border:1px solid rgba(255,139,139,0.08);
      font-weight:700;
      text-decoration:none;
      cursor:pointer;
    }
    .btn-logout:hover{ background:rgba(255,139,139,0.10); color:#ff6b6b; }
  </style>
</head>
<body class="arpia-dark">

  <aside class="sidebar collapsed" id="sidebar" aria-label="Menu lateral">
    <div class="brand">
      <!-- substituir texto pelo logo pequeno -->
      <a href="{% url 'dashboard' %}" style="display:inline-flex;align-items:center;gap:.5rem;text-decoration:none;">
        <img src="{% static 'img/logo-40x40.png' %}" alt="ARPIA" style="width:40px;height:40px;display:block;">
      </a>
    </div>

    <nav class="menu" role="navigation">
      <a href="{% url 'dashboard' %}" class="menu-item" title="Home">
        <img src="{% static 'icons/home.svg' %}" class="icon" alt="Home">
        <span class="label">Home</span>
      </a>

      <!-- menu-section removida -->

      <a href="{% url 'projects_list' %}" class="menu-item" title="Projetos">
        <img src="{% static 'icons/squares-2x2.svg' %}" class="icon" alt="Projetos">
        <span class="label">Projetos</span>
      </a>

      <a href="{% url 'scripts_list' %}" class="menu-item" title="Scripts">
        <img src="{% static 'icons/code-bracket.svg' %}" class="icon" alt="Scripts">
        <span class="label">Scripts</span>
      </a>

      <a href="{% url 'tools_list' %}" class="menu-item" title="Ferramentas">
        <img src="{% static 'icons/wrench-screwdriver.svg' %}" class="icon" alt="Ferramentas">
        <span class="label">Ferramentas</span>
      </a>

      <a href="{% url 'reports_list' %}" class="menu-item" title="Relatórios">
        <img src="{% static 'icons/chart-pie.svg' %}" class="icon" alt="Relatórios">
        <span class="label">Relatórios</span>
      </a>

      <a href="{% url 'logs_list' %}" class="menu-item" title="Logs">
        <img src="{% static 'icons/document-text.svg' %}" class="icon" alt="Logs">
        <span class="label">Logs</span>
      </a>

      <!-- nova entrada de menu para AI (arpia_ai) -->
      <a href="{% url 'ai_list' %}" class="menu-item" title="AI">
        <img src="{% static 'icons/star.svg' %}" class="icon" alt="AI">
        <span class="label">AI</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <a href="{% url 'admin:index' %}" class="menu-item small" title="Admin">
        <img src="{% static 'icons/cog-6-tooth.svg' %}" class="icon" alt="Admin">
        <span class="label">Admin</span>
      </a>
    </div>

    <button id="toggleSidebar" class="toggle-btn" aria-label="Expandir menu">☰</button>
  </aside>

  <header class="topbar">
    <div class="top-left">
      <button id="hamburger" class="hamburger" aria-label="abrir menu">☰</button>
      <div class="module-switch">
        <a href="#" class="module active">Scan</a>
        <a href="#" class="module">Vuln</a>
        <a href="#" class="module">Hunt</a>
        <a href="#" class="module">Pentest</a>
      </div>
    </div>

    <div class="top-right">
      <div class="search"><input placeholder="Buscar..." aria-label="buscar"/></div>
      <div class="user-area">
        {% if user.is_authenticated %}
          <span class="user">Olá, {{ user.username }}</span>
          <a href="{% url 'logout' %}" class="btn-logout" title="Sair">Sair</a>
        {% else %}
          <a href="{% url 'login' %}" class="link">Login</a>
        {% endif %}
      </div>
    </div>
  </header>

  <main class="main" id="main">
    {% block content %}{% endblock %}
  </main>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'js/dashboard.js' %}"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function(){
    const sb = document.getElementById('sidebar');
    const btn = document.getElementById('toggleSidebar');
    const ham = document.getElementById('hamburger');
    function toggle(){ sb.classList.toggle('collapsed'); document.getElementById('main').classList.toggle('sidebar-expanded'); }
    if(btn) btn.addEventListener('click', toggle);
    if(ham) ham.addEventListener('click', toggle);
  });
  </script>
</body>
</html>